<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>App</title>
	<style>
		body {
			background-color: rgb(22, 22, 22);
			color: white;
		}
	</style>
</head>
<body>

	<button class="start-button">
		start
	</button>
	<p></p>
	<button class="add">Add to cart</button>
	<p class="js-text"></p>

	<button class="addded">Add</button>
	<button class="remove">Remove</button>
	<script>
/*
		//12a
		const add = () => {
			console.log(2 + 3);
		};
		add();

		//12b
		function runTwice(fun) {
			fun();
			fun();
		}
		runTwice(function() { console.log('12b'); });
		runTwice(add);
*/
		//12c
		const but = document.querySelector('.start-button');
		let interval;
		let ischanged = false;
		but.addEventListener('click', () => {
			if(!ischanged) {
				interval = setTimeout(() =>{
					but.innerHTML = 'Finished';
				}, 1000);
				ischanged = true;
			} else {
				clearTimeout(interval);
				but.innerHTML = 'start';
        ischanged = false;
			}
		});
/*
		//12d
		const but = document.querySelector('.start-button');
		but.addEventListener('click', () => {
			but.innerHTML = 'Loading...'
			setTimeout(() =>{
				but.innerHTML = 'Finished';
			}, 1000);
		});
		//12e
		document.querySelector('.add').addEventListener('click', () => {
			const text = document.querySelector('.js-text');
			text.textContent = 'Added';
			setTimeout(() => { text.textContent = '' }, 1000);
		})
		//12e
		let intervalID;
		document.querySelector('.add').addEventListener('click', () => {
			const text = document.querySelector('.js-text');
			text.textContent = 'Added';
			clearInterval(intervalID);
			intervalID = setTimeout(() => { text.textContent = '' }, 2000);
		})

		//12g
		setInterval(() => {
			if(document.title === `App`) {
				document.title = `(2 New Messages)`
			} else {
				document.title = `App`
			}
		}, 1000);
		//12h
		let message = 2;
		let interval;
		let isDisplayingNotification;
		displayNotification ();
		
		function displayNotification () {
			if (isDisplayingNotification) {
				return;
			}
			
			isDisplayingNotification = true;
			
			interval = setInterval(() => {
				if(document.title === `App`) {
					document.title = `(${message}) New Messages`
				} else {
					document.title = `App`
			}
		}, 1000);
	}
	
		
	document.querySelector('.addded').addEventListener('click', () => {
			message++;
			displayNotification();
			console.log(message);
		});
		
		document.querySelector('.remove').addEventListener('click', () => {
			if(message > 0) {
				--message;
				if (message === 0)	stopNotification();
			}
			console.log(message);
		});
		
		function stopNotification() {
			clearInterval(interval);
			document.title = 'App';
			isDisplayingNotification = false;
		}
		
*/
	</script>
</body>
</html>